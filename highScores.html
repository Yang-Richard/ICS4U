<!DOCTYPE html>
<html>
	<head>
		<link type="text/css" rel="stylesheet" href="css/highScores.css"/>
		<title>High Scores</title>
	</head>
	<body onload="languageSet(); writeHighscores()">
			<div id="buttonColumn">
				<button id="returnHome" onclick="goHome()">Back</button>
				<button id="easy" onclick="highScoreEasy()">Easy</button>
				<button id="medium" onclick="highScoreMedium()"> Medium</button>
				<button id="hard" onclick="highScoreHard()">Hard</button>
			</div>
                    <div id="table">
                        <table border="0">
                            <tr>
                            <th id="rank">Rank</th>
                            <th id="name">Name</th>
                            <th id="score">Score</th>
                            <th id="date">Date</th>
                            </tr>
                            <tr>
                            <td>1</td>
                            <td id="userName1"></td>
                            <td id="userScore1"></td>
                            <td id="userDate1"></td>
                            </tr>
                            <tr>
                            <td>2</td>
                            <td id="userName2"></td>
                            <td id="userScore2"></td>
                            <td id="userDate2"></td>
                            </tr>
                            <tr>
                            <td>3</td>
                            <td id="userName3"></td>
                            <td id="userScore3"></td>
                            <td id="userDate3"></td>
                            </tr>
                            <tr>
                            <td>4</td>
                            <td id="userName4"></td>
                            <td id="userScore4"></td>
                            <td id="userDate4"></td>
                            </tr>
                            <tr>
                            <td>5</td>
                            <td id="userName5"></td>
                            <td id="userScore5"></td>
                            <td id="userDate5"></td>
                            </tr>
                            <tr>
                            <td>6</td>
                            <td id="userName6"></td>
                            <td id="userScore6"></td>
                            <td id="userDate6"></td>
                            </tr>
                            <tr>
                            <td>7</td>
                            <td id="userName7"></td>
                            <td id="userScore7"></td>
                            <td id="userDate7"></td>
                            </tr>
                            <tr>
                            <td>8</td>
                            <td id="userName8"></td>
                            <td id="userScore8"></td>
                            <td id="userDate8"></td>
                            </tr>
                            <tr>
                            <td>9</td>
                            <td id="userName9"></td>
                            <td id="userScore9"></td>
                            <td id="userDate9"></td>
                            </tr>
                            <tr>
                            <td>10</td>
                            <td id="userName10"></td>
                            <td id="userScore10"></td>
                            <td id="userDate10"></td>
                            </tr>
                        </table>    
                </div>
	<script>
		var scoreId = 'easy';
                
		function buttonSound(){
			if(sessionStorage.getItem('sound') !== 'off'){
				var clickSound = new Audio('music/click.mp3');
				clickSound.play();
			}
		}
		
		function goHome(){
			buttonSound();
			window(location.href='mainMenu.html');
		}
		
		function highScoreEasy() {
			buttonSound();
                        scoreId = 'easy';
                        writeHighscores();
		}
	
		function highScoreMedium() {
			buttonSound();
                        scoreId = 'medium';
                        writeHighscores();
		}
		
		function highScoreHard() {
			buttonSound();
                        scoreId = 'hard';
                        writeHighscores();
		}
                
                function difficultyType(){
                switch(scoreId){
                    case 'easy':
                        return 0;
                    case 'medium':
                        return 1;
                    case 'hard':
                        return 2;  
                    default:
                        console.log("gameDifficulty can not be managed.");
                        break;
                }
            }
                
                function resetHighscores(){
                    var highScoreData = [[[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0]],
                                        [[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0]],
                                        [[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0]]];
                    localStorage.highScoreData = JSON.stringify(highScoreData);
                    console.log("highscores reset");
                }
                
                function writeHighscores(){
                    var highScoreData;
                    var alreadyInput = "";
                        var lowestScore = 0;
                    

                    if(localStorage.highScoreData){
                        highScoreData = JSON.parse(localStorage.highScoreData);
                    }
                    else{
                        highScoreData = [[[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0]],
                                        [[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0]],
                                        [[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0],[0,0,0]]];
                    }      
                    
                    
                        
                        
                       for(var a = 0; a < 10; a++){
                            if (highScoreData[difficultyType()][a][1] < highScoreData[difficultyType()][lowestScore][1]){
                                lowestScore=a;
                            }
                        } 
                    for(var a = 0; a < 10; a++){
                        var highestScore = lowestScore;// start it at the array number of the lowest score value
                        for(var b = 0; b < 10; b++){
                           
                            if (highScoreData[difficultyType()][b][1] >= highScoreData[difficultyType()][highestScore][1] && alreadyInput.indexOf(b) === -1){
                                highestScore=b;
                            }
                        }
                        alreadyInput += "" + highestScore;
                        if(highScoreData[difficultyType()][highestScore][1] !== 0)
                        {
                            document.getElementById('userName' + (a+1)).innerHTML=highScoreData[difficultyType()][highestScore][0];
                            document.getElementById('userScore' + (a+1)).innerHTML=highScoreData[difficultyType()][highestScore][1];
                            document.getElementById('userDate' + (a+1)).innerHTML=highScoreData[difficultyType()][highestScore][2];
                        }
                        else{
                            document.getElementById('userName' + (a+1)).innerHTML="-";
                            document.getElementById('userScore' + (a+1)).innerHTML="-";
                            document.getElementById('userDate' + (a+1)).innerHTML="-";
                        }
                    }
                    
                }
		
			
		function languageSet() {
			if(sessionStorage.getItem('language') == 'english'){
				document.getElementById("easy").innerHTML="Easy";
				document.getElementById("medium").innerHTML="Medium";
				document.getElementById("hard").innerHTML="Hard";
				document.getElementById("returnHome").innerHTML="Back";
                                document.getElementById("rank").innerHTML="Rank";
				document.getElementById("name").innerHTML="Name";
				document.getElementById("score").innerHTML="Score";
				document.getElementById("date").innerHTML="Date";

				
			}
			else {
				document.getElementById("easy").innerHTML="Facile";
				document.getElementById("medium").innerHTML="Moyen";
				document.getElementById("hard").innerHTML="Difficile";
				document.getElementById("returnHome").innerHTML="Retourner";
                                document.getElementById("rank").innerHTML="Place";
				document.getElementById("name").innerHTML="Nom";
				document.getElementById("score").innerHTML="Score";
				document.getElementById("date").innerHTML="Jour";
			
			}
		}
	</script>
	</body>
</html>
