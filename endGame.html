<!DOCTYPE html>
<html>
 	<head>
		<link type="text/css" rel="stylesheet" href="css/endGame.css"/>
		<title>End Game</title>
	</head>
	<body onload="checkScore()">
		<div>
			<button id ="startButton" onclick="window.location.href='testStart.html'"></button>
		</div>
		<script>
		
		sessionStorage.score = '1';
		sessionStorage.gameDifficulty = 'medium';
		
		var scoreDiff = sessionStorage.gameDifficulty;
		var num1 = 0;
		var highScore = false;

		function checkScore(){
			
			for(var k = 0; k < 3; k++){
				var diff;
				if(k == 0){
					diff = "easy";
				}
				else if(k == 1){
					diff = "medium";
				}
				else if(k == 2){
					diff = "hard";
				}
				for(var j = 1; j < 11; j++){
					if(localStorage.getItem(diff+'Score'+j) == null){
						localStorage.setItem(diff+'Score'+j, '0');
					}
//					alert(scoreDiff+'Score'+j);
//					alert(localStorage.getItem(scoreDiff+'Score'+j));
				}
			}
			
			while(num1 < 11 && highScore == false){
				num1++;
				alert(num1);
				alert(localStorage.getItem(scoreDiff+'Score'+num1));
				
				if(sessionStorage.score > localStorage.getItem(scoreDiff+'Score'+num1)){
					
//					alert(sessionStorage.score);
//					alert(localStorage.getItem(scoreDiff+num1));
					highScore = true;
					alert('reached');
				}
			}
			
			if (highScore == true){
				var player=prompt("Please enter your name","Player1");
				if(player!=null){
					var rankNum = 10;
					while(rankNum > num1){
						localStorage.setItem(scoreDiff+'Name'+rankNum,localStorage.getItem(scoreDiff+'Name'+(rankNum-1)));
						localStorage.setItem(scoreDiff+'Score'+rankNum,localStorage.getItem(scoreDiff+'Score'+(rankNum-1)));
						localStorage.setItem(scoreDiff+'Date'+rankNum,localStorage.getItem(scoreDiff+'Date'+(rankNum-1)));
						rankNum = rankNum-1;
					}
					
					var currentDate = new Date();
					var day = currentDate.getDate();
					var month = currentDate.getMonth() + 1;
					var year = currentDate.getFullYear();
			
					localStorage.setItem(scoreDiff+'Name'+rankNum,player);
					localStorage.setItem(scoreDiff+'Score'+rankNum,sessionStorage.score);
					localStorage.setItem(scoreDiff+'Date'+rankNum,(day + "/" + month + "/" + year));
					
					alert(scoreDiff+'Name'+rankNum);
					alert(localStorage.getItem(scoreDiff+'Name'+rankNum));
					alert(localStorage.getItem(scoreDiff+'Score'+rankNum));
					alert(localStorage.getItem(scoreDiff+'Date'+rankNum));
				}
			}
		}
		
			//if(typeof(Storage)!=="undefined"){
			//	alert("Yes! localStorage and sessionStorage support!");
			//}
			//else{
			//	alert("Sorry! No web storage support..");
			//}
			
			//localStorage.setItem('favoriteflavor','vanilla');
			//localStorage.setItem('favoriteflavor2','chocolate');
			//alert(document.getElementById('favoriteflavor').innerHTML="Last name: "+ localStorage.lastname);
			//var name = "favorite";
			//var name2 = "flavor";
			//var name3 = name+name2;
			
			//alert(localStorage.getItem(name3));
		</script>
	</body>
</html>